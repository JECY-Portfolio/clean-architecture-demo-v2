
    [Function("CreateAlternateAddress")]
    [OpenApiOperation("CreateAlternateAddress", tags: new[] { "Customers" }, Summary = "Add alternate address for a customer", Description = "Create an alternative addess for a specific customer")]
    [OpenApiParameter("customerId", In = ParameterLocation.Path, Required = true, Type = typeof(Guid), Description = "Unique identifier of the customer")]
    [OpenApiRequestBody("application/json", typeof(AddressDto), Description = "Address details to add")]
    [OpenApiResponseWithoutBody(HttpStatusCode.Created, Description = "Alternate address added successfully")]
    [OpenApiResponseWithoutBody(HttpStatusCode.BadRequest, Description = "invalid request")]
    [OpenApiResponseWithoutBody(HttpStatusCode.NotFound, Description = "Customer not found")]
    public async Task<IActionResult> CreateAlternateAddress(
        [HttpTrigger(AuthorizationLevel.Anonymous, "post", Route = RouteConstants.CreateAlternateAddress)] HttpRequest req,
        Guid customerId)
    {
        var authResult = CheckAuthorization(req);
        if (authResult != null) return authResult;

        var dto = await req.GetBodyAsync<AddressDto>(jsonSerializerOptions.Value);
        if (dto == null) return new BadRequestObjectResult("Request body cannot be empty");

        try
        {
            await customerService.AddAlternateAddress(customerId, dto);
            return new CreatedResult("", new {message = "Alternate address added successfully"});
        }
        catch (ArgumentNullException ex)
        {
            return new BadRequestObjectResult(ex.Message);
        }
        catch (KeyNotFoundException ex)
        {
            return new NotFoundObjectResult(ex.Message);
        }
        catch (Exception ex)
        {
            logger.LogError(ex, "Unexpected error while adding alternate address");
            return new StatusCodeResult(StatusCodes.Status500InternalServerError);
        }   
    }

}

